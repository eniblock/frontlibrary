<div id="ledger-screen" >
    <ng-container [ngSwitch]="status">
        <h2 *ngSwitchCase="'INITIALIZE'" class="title">{{'LEDGER.CONNECT_SCREEN' | translate}}</h2>
        <h2 *ngSwitchCase="'SIGN_OPERATION'" class="title">{{'LEDGER.SIGN_SCREEN' | translate}}</h2>
        <h2 *ngSwitchCase="'SUBMIT'" class="title">{{'LEDGER.SUBMIT_SCREEN' | translate}}</h2>
        <h2 *ngSwitchCase="'SUCCESS'" class="title">{{'LEDGER.SUCCESS_SCREEN' | translate}}</h2>
    </ng-container>
    <mat-horizontal-stepper labelPosition="bottom" #stepper>
        <mat-step [editable]="false">
                <ng-template matStepLabel>{{'LEDGER.DEVICE' | translate}}</ng-template>
        </mat-step>
        <mat-step [editable]="false">
                <ng-template matStepLabel>{{'LEDGER.SIGN' | translate}}</ng-template>
        </mat-step>
        <mat-step [editable]="false">
            <ng-template matStepLabel>{{'LEDGER.DONE' | translate}}</ng-template>
        </mat-step>
    </mat-horizontal-stepper>
    <ng-container [ngSwitch]="status" >
        <div *ngSwitchCase="'INITIALIZE'">
            <img src="assets/images/ledger/ledger_initialize.png">
            <div class="message">
                <h2>
                    {{'LEDGER.INITIALIZE' | translate}}
                </h2>
            </div>
        </div>
        <div *ngSwitchCase="'SIGN_OPERATION'">
            <div class="m-24 mt-0">
                <app-info [data]="signData"></app-info>
                <div class="mt-12">
                    <app-show-more [moreLabel]="'LEDGER.SHOW_RAW' | translate" [lessLabel]="'LEDGER.HIDE_ROW' | translate">
                        <div class="raw-tx">
                            <mat-form-field appearance="outline" class="mt-12 tx">
                                <input matInput [value]="tx" [readonly]="true">
                            </mat-form-field>
                            <button
                                    #copyBut
                                    mat-icon-button
                                    class="mr-0 mr-sm-16"
                                    (mouseenter)="$event.stopImmediatePropagation()"
                                    (mouseleave)="onLeave($event)"
                                    [cdkCopyToClipboard]="tx"
                                    [matTooltip]="'LEDGER.COPIED' | translate"
                                    #tooltip="matTooltip"
                                    (click)="copyClick()"
                            >
                                <mat-icon>
                                    file_copy
                                </mat-icon>
                            </button>
                        </div>
                    </app-show-more>
                </div>
            </div>
            <img src="assets/images/ledger/ledger_validate.png">
            <div class="message">
                <h2 class="mt-12">
                    {{'LEDGER.SIGN_OP' | translate}}
                </h2>
            </div>
        </div>
        <div *ngSwitchCase="'SUBMIT'">
            <div class="message">
                <mat-spinner class="spinner"></mat-spinner>
                <h2 class="mt-12">
                    {{'LEDGER.SUBMIT' | translate}}
                </h2>
            </div>
        </div>
        <div *ngSwitchCase="'LOADING'">
            <div class="message">
                <mat-spinner class="spinner"></mat-spinner>
                <h2 class="mt-12">
                    {{'LEDGER.LOADING' | translate}}
                </h2>
            </div>
        </div>
        <div *ngSwitchCase="'SUCCESS'">
            <div class="message">
                <mat-icon class="success">check_circle</mat-icon>
                <h2 class="mt-12">
                    {{'LEDGER.SUCCESS' | translate}}
                </h2>
                <h2 class="mt-12">
                    <a class="link" (click)="dialogRef.close(true)" [routerLink]="'apps/admin/operations/' + operationId">{{'LEDGER.OP_ID' | translate}} {{operationId}}</a>
                </h2>
            </div>
            <div class="button mt-24">
                <button mat-button class="accent" (click)="dialogRef.close(true)">{{'LEDGER.DONE' | translate}}</button>
            </div>
        </div>
        <div *ngSwitchCase="'ERROR'">
            <div class="message">
                <h2 class="mt-12">
                    {{'LEDGER.INTERRUPT' | translate}}
                </h2>
                <h2 class="mt-12">
                    {{'LEDGER.NOTHING_SUBMITTED' | translate}}
                </h2>
                <div class="secondary-text err-list">
                    {{'LEDGER.CAUSE' | translate}}
                    <ul>
                        <li>{{'LEDGER.TIME_OUT' | translate}}</li>
                        <li>{{'LEDGER.BLOCK_SYNC' | translate}}</li>
                        <li>{{'LEDGER.ACCESS_CONTROL' | translate}}</li>
                        <li>{{'LEDGER.REFUSED' | translate}}</li>
                    </ul>
                    <app-show-more [moreLabel]="'LEDGER.MORE_DETAILS' | translate" [lessLabel]="'LEDGER.LESS_DETAILS' | translate">
                        {{ledgerErr}}
                    </app-show-more>
                </div>
            </div>
            <div class="button mt-24">
                <button mat-button class="accent" (click)="goReset()">{{'LEDGER.RETRY' | translate}}</button>
                <button mat-button (click)="dialogRef.close(false)">{{'LEDGER.CLOSE' | translate}}</button>
            </div>
        </div>
        <div *ngSwitchDefault>
            <img src="assets/images/ledger/ledger_initialize.png">
            <div class="message">
                <h2 class="mt-12">
                    {{'LEDGER.ACCEPT' | translate}}
                </h2>
            </div>
        </div>
    </ng-container>
</div>

